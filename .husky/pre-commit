#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running comprehensive marketplace validation..."

# Run comprehensive validation
npm run validate:comprehensive

# Check exit code
if [ $? -ne 0 ]; then
  echo ""
  echo "🚫 COMMIT BLOCKED"
  echo "================="
  echo "Validation failed! Please fix the issues above before committing."
  echo ""
  echo "💡 To resolve:"
  echo "1. Fix the validation failures listed above"
  echo "2. Run 'npm run validate:all' to verify fixes"
  echo "3. Try committing again"
  echo ""
  echo "🔧 If you need to bypass validation (not recommended):"
  echo "   git commit --no-verify -m 'your message'"
  echo ""
  exit 1
fi

echo "✅ Validation passed - proceeding with commit"